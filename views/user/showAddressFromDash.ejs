<%- include("../user/layouts/user_header.ejs") %>
<div class="page-wrapper">
    <main class="main">
        <nav aria-label="breadcrumb" class="breadcrumb-nav border-0 mb-0">
            <div class="container">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/">Home</a></li>
                    <li class="breadcrumb-item"><a href="/userDashboard">Profile</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Address</li>
                </ol>
            </div><!-- End .container -->
        </nav><!-- End .breadcrumb-nav -->
    
        <div class="row">
            <div class="col-lg-9">
                <h2 class="checkout-title">Billing Details <small>You can update address while checkout</small></h2><!-- End .checkout-title -->
                <div class="row">
                    <div class="col-lg-12">
                      <div class="d-flex justify-content-end pb-2">
                       
                    </div>
                        <% if(address.length> 0){
                            address.forEach((address)=>{
                            %>
                            <div class="card card-dashboard">
                                <div class="card-body">
                                 
                                   
                                    <ul>
                                      <h3 class="card-title"> Address</h3><!-- End .card-title -->
                                        <li>Name : <%=address.userName %>
                                        </li>
                                        <li>mobile : <%=address.mobile %>
                                        </li>
                                        <li>altrenativeMob : <%=address.altrenativeMob %>
                                        </li>
                                        <li>houseName : <%=address.houseName %>
                                        </li>
                                        <li>city : <%=address.city %>
                                        </li>
                                        <li>state : <%=address.state %>
                                        </li>
                                        <li>pincode : <%=address.pincode %>
                                        </li>
                                        
                                        <a href="/editAddressFromDash?id=<%=  address._id %>">
                                          <button type="button" class="btn btn-outline-primary btn-rounded"  style="color: black; border-color: rgb(46, 202, 88);">
                                              Edit
                                          </button>
                                      </a>
                                 
                                        <a href="">
                                            
                                                <a class="btn btn-outline-primary btn-rounded" type="button" style="color: black; border-color:rgb(46, 202, 88) ;"
                                                        onclick="deleteAddress('<%= address._id%>')">Delete</a>
                                            </button>
                                        </a>

                                    </ul>
                            </div><!-- End .card-dashboard -->
                         </div>
                    <% }) }else{ %> 
                       
            <div class="error-content text-center">
              <div class="container">
                  <h1 class="error-title"> <span style="color: rgb(46, 202, 88);">Your</span> wishList is empty </h1><!-- End .error-title -->
                  <p>Add Products in Wish List</p>
                  <a href="/shop" class="btn btn-outline" style="color: rgb(46, 202, 88);;">
                      <span>Keep shopping</span>
                      <i class="">>>></i>
                  </a>
              </div>
              </div>
                      <%}%>  
                </div><!-- End .col-lg-12 -->
            </div><!-- End .row -->
                
          
            </div><!-- End .col-lg-9 -->
    </main><!-- End .main -->
    </main><!-- End .main -->
 
    <script>
         function deleteAddress(id) {
              Swal.fire({
                title: "Are you sure?",
                text: "You won't be able to revert this!",
                icon: "warning",
                showCancelButton: true,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: "Yes, delete it!",
                cancelButtonText: "Cancel",
              }).then((result) => {
                if (result.isConfirmed) {
                  $.ajax({
                    url: "/deleteAddress",
                    data: {
        
                      id: id,
                    },
                    method: "post",
                    success: (response) => {
                      if ((response.remove = true)) {
                        location.href = "/userDashboard";
                      }
                    },
                  });
                }
              });
            }

    </script>
  
                                    
   

<%- include("../user/layouts/user_footer.ejs") %>
