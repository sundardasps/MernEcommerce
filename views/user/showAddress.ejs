<%- include("../user/layouts/user_header.ejs") %>
<div class="page-wrapper">
    <main class="main">
        <nav aria-label="breadcrumb" class="breadcrumb-nav border-0 mb-0">
            <div class="container">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/home">Home</a></li>
                    <li class="breadcrumb-item"><a href="/userDashboard">Profile</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Address</li>
                </ol>
            </div><!-- End .container -->
        </nav><!-- End .breadcrumb-nav -->
    
        <div class="row">
            <div class="col-lg-9">
                <h2 class="checkout-title">Billing Details</h2><!-- End .checkout-title -->
                <div class="row">
                    <div class="col-lg-12">
                      <div class="d-flex justify-content-end pb-2">
                        <a href="/addAddress" type="button" class="btn btn-outline-primary-2"> Add
                            Address</a>
                    </div>
                        <% if(address.length> 0){
                            address.forEach((address)=>{
                            %>
                            <div class="card card-dashboard">
                                <div class="card-body">
                                  <input class="form-check-input pt-5" required type="radio" name="address" id="flexRadioDefault1"
                                  value="<%=address.userName %>,<%=address.mobile %>,<%=address.alternativenumber %>,<%=address.hoseName %>,<%=address.city %>,<%=address.state %>,<%=address.pincode %>">
                                   
                                    <ul>
                                      <h3 class="card-title"> Address</h3><!-- End .card-title -->
                                        <li>Name : <%=address.userName %>
                                        </li>
                                        <li>mobile : <%=address.mobile %>
                                        </li>
                                        <li>altrenativeMob : <%=address.alternativenumber %>
                                        </li>
                                        <li>houseName : <%=address.hoseName %>
                                        </li>
                                        <li>city : <%=address.city %>
                                        </li>
                                        <li>state : <%=address.state %>
                                        </li>
                                        <li>pincode : <%=address.pincode %>
                                        </li>
                                       
                                        <a href="/editAddress?id=<%=  address._id %>">
                                            <button type="button" class="btn btn-outline-primary btn-rounded"  style="color: black; border-color: rgb(46, 202, 88);">
                                                Edit
                                            </button>
                                        </a>
                                        <a href="">
                                            
                                                <a class="btn btn-outline-primary btn-rounded" type="button" style="color: black; border-color:rgb(46, 202, 88) ;"
                                                        onclick="deleteAddress('<%= address._id%>')">Delete</a>
                                            </button>
                                        </a>

                                    </ul>
                            </div><!-- End .card-dashboard -->
                         </div>
                    <% }) } %>   
                </div><!-- End .col-lg-12 -->
            </div><!-- End .row -->
                
          
            </div><!-- End .col-lg-9 -->
    </main><!-- End .main -->
    </main><!-- End .main -->
 
    <script>
         function deleteAddress(id) {
              Swal.fire({
                title: "Are you sure?",
                text: "You won't be able to revert this!",
                icon: "warning",
                showCancelButton: true,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: "Yes, delete it!",
                cancelButtonText: "Cancel",
              }).then((result) => {
                if (result.isConfirmed) {
                  $.ajax({
                    url: "/deleteAddress",
                    data: {
        
                      id: id,
                    },
                    method: "post",
                    success: (response) => {
                      if ((response.remove = true)) {
                        location.reload();
                      }
                    },
                  });
                }
              });
            }

    </script>
  
                                    
   

<%- include("../user/layouts/user_footer.ejs") %>
